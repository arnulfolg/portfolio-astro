---
import '../../styles/widgets/Portfolio.css'
import { getLocale } from '../../scripts/getLocale';
import PortfolioCard from '../cards/PortfolioCard.astro';
import { getContentHeader, getPortfolio } from '../../scripts/getContent';

const { pathname } = Astro.url

const language: string = pathname.split('/')[1];
const locale: string = getLocale(language);

const portfolio = await getContentHeader('4KfXOh5UAb8vCN9YiQvaI7', locale)
const portfolioLink = await getContentHeader('4672gexNeDtvV2QiQYGBQT', locale)

const entries = await getPortfolio(locale)

---
<section class="section">
	<header>
		<h2 class="animate-titles">{portfolio.fields.heading}</h2>
	</header>
	<section class="section_cols-2">
		{entries.items.map((project) => {
			return (
				<PortfolioCard
					link={project.sys.id}
					image={project.fields.tumbnail.fields.file.url}
					project={project.fields.project_name}

				/>
			);
		})}
	</section>
	<footer>
		<a href="/portfolio">{portfolioLink.fields.heading}</a>
	</footer>
</section>